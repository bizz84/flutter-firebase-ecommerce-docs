# Flutter & Firebase eCommerce Template

This is the documentation website for the [Flutter eCommerce Demo app](https://my-shop-ecommerce-stg.web.app/) that is included in my [Flutter & Firebase Masterclass](#) course.

A Flutter web build of this demo is available at this link:

- [Flutter eCommerce Demo App](https://my-shop-ecommerce-stg.web.app/)

This is intended as a **reference eCommerce app** for viewing and purchasing products, and includes the following features:

- Products List
- Product Page
- Shopping Cart
- Checkout using Stripe
- Orders List
- Sign in & sign out flows
- Admin pages (manage products and orders)

## Flutter Client

The demo includes a Flutter app that runs on iOS, Android and web.

The app uses the following packages:

- [`flutter_riverpod`](https://pub.dev/packages/flutter_riverpod) and [`freezed`](https://pub.dev/packages/freezed) for state management
- [`go_router`](https://pub.dev/packages/go_router) for navigation and routing
- [`flutter_stripe`](https://pub.dev/packages/flutter_stripe), [`flutter_stripe_web`](https://pub.dev/packages/flutter_stripe_web) and [`pay`](https://pub.dev/packages/pay) for payments
- [`sembast`](https://pub.dev/packages/sembast) and [`sembast_web`](https://pub.dev/packages/sembast_web) for local data persistence
- [`firebase_auth`](https://pub.dev/packages/firebase_auth)
- [`cloud_firestore`](https://pub.dev/packages/cloud_firestore)
- [`cloud_functions`](https://pub.dev/packages/cloud_functions)
- [`flutter_layout_grid`](https://pub.dev/packages/flutter_layout_grid) for CSS-like grid layouts
- [`cached_network_image`](cached_network_image)
- [`mocktail`](https://pub.dev/packages/mocktail) for testing

### Architecture

The client app uses the controller-service-repository pattern and defines four layers:

- **Repositories**: access to the outside world (Firebase), expose data classes to the rest of the app via Futures and Streams
- **Services**: domain-level classes to mediate between repositories and the levels below. 
- **Controllers**: presentation-level classes used to manage the widgets' state and call APIs from the layers above
- **Widgets**: all the custom widgets used to show the UI

### Testing

The client app includes unit, widget, and integration tests.

The [`mocktail`](https://pub.dev/packages/mocktail) package is used to mock dependencies.

Widget and integration tests use [robot testing](https://verygood.ventures/blog/robot-testing-in-flutter) for more readable code.

The codebase comes with **fakes** for each of the repositories in the app. These can be used as a replacement for the real repositories that talk to Firebase.

### Stripe Integration

On iOS and Android, payments are done with the native Stripe payment sheet, which supports credit card, Apple Pay and Google Pay.

On web, only card payments are supported.

## Backend

The project uses Firebase Auth, Cloud Firestore and Cloud Functions as a backend.

Development, staging, and production environments are supported.

In addition, some setup code is included to run the client app with the [Firebase Emulator Suite](https://firebase.google.com/docs/emulator-suite).



